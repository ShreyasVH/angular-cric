<div>
    <div *ngIf="loaded">
        <table mat-table [dataSource]="stats">
            <ng-container *ngFor="let column of columns[selectedFilters.type]" [matColumnDef]="column.key">
                <th [ngClass]="{'sortable': column.sortable}" mat-header-cell *matHeaderCellDef (click)="handleSort(column.key, selectedFilters.type)">
                    {{column.displayKey}}
                    <span *ngIf="isSortActive(column.key)">
                        {{getSortSymbol(column.key)}}
                    </span>
                </th>
                <td mat-cell *matCellDef="let stat">
                    {{stat[column.key]}}
                </td>
                <td mat-footer-cell *matFooterCellDef>

                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="getDisplayColumns(selectedFilters.type)"></tr>
            <tr mat-row *matRowDef="let row; columns: getDisplayColumns(selectedFilters.type);"></tr>
        </table>

        <div class="pagination-box">
            <div *ngIf="page > 2" class="pagination-button" (click)="goToPage(1)">
                {{'<<'}}
            </div>

            <div *ngIf="page > 1" class="pagination-button" (click)="goToPage(page - 1)">
                {{'<'}}
            </div>

            <div *ngFor="let i of getPageRange()" [ngClass]="{ 'pagination-button': true, active: i === page }" (click)="goToPage(i)">
                {{i}}
            </div>

            <div *ngIf="page < getTotalPages() - 1" class="pagination-button" (click)="goToPage(page + 1)">
                {{'>'}}
            </div>

            <div *ngIf="page < getTotalPages() - 2" class="pagination-button" (click)="goToPage(getTotalPages())">
                {{'>>'}}
            </div>
        </div>
    </div>

    <app-filters
        [options]="options"
        [selected]="selectedFiltersTemp"
        [onFiltersApply]="handleApplyFilters"
        [onEvent]="handleFilterEvent"
        (dialogOpened)="onDialogOpened($event)"
    >
    </app-filters>
</div>